{"version":3,"sources":["camera.js","utilities.js","App.js","index.js"],"names":["camera","width","height","createObjects","console","log","document","getElementsByTagName","video","createElement","id","autoplay","body","appendChild","canvas","context","startCamera","w","h","navigator","mediaDevices","getUserMedia","this","getElementById","getContext","then","stream","srcObject","play","takeSnapshot","pause","videoElement","getCtx","labelMap","0","name","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","drawRect","boxes","classes","scores","threshold","imgWidth","imgHeight","ctx","i","length","x","y","text","strokeStyle","lineWidth","fillStyle","font","beginPath","fillText","Math","round","rect","stroke","output","signs","push","pl","require","Recipe","props","ing","React","useState","recipe","setRecipe","className","onClick","e","ingredientArray","sort","session","create","consult","success","query","goal","answer","format_answer","error","err","style","target","href","detecting","detected","App","ingredients","setIngredients","loading","setLoading","detectedSomething","setdetectedSomething","a","model","cvstfjs","loadModelAsync","process","image","executeAsync","result","useEffect","clientWidth","theWidth","isMobile","useMediaQuery","mobile","marginTop","ReactDOM","render","StrictMode"],"mappings":"snBA+EmBA,G,OAtEJ,WACX,IAAIC,EAAQ,EACRC,EAAS,EAEPC,EAAgB,WAElBC,QAAQC,IAAIC,SAASC,qBAAqB,SAC1C,IAAMC,EAAQF,SAASG,cAAc,SACrCD,EAAME,GAAK,QACXF,EAAMP,MAAQA,EACdO,EAAMN,OAASA,EACfM,EAAMG,UAAW,EACjBL,SAASM,KAAKC,YAAYL,GAE1B,IAAMM,EAASR,SAASG,cAAc,UACtCK,EAAOJ,GAAK,SACZI,EAAOb,MAAQA,EACfa,EAAOZ,OAASA,EAChBI,SAASM,KAAKC,YAAYC,IAM9B,MAAO,CACHN,MAAO,KACPO,QAAS,KACTD,OAAQ,KAERE,YAAa,WAA6B,IAYvBR,EAZIS,EAAkB,uDAAd,IAAKC,EAAS,uDAAL,IAC5BC,UAAUC,cAAgBD,UAAUC,aAAaC,eACjDpB,EAAQgB,EACRf,EAASgB,EAETf,IAEAmB,KAAKd,MAAQF,SAASiB,eAAe,SACrCD,KAAKR,OAASR,SAASiB,eAAe,UACtCD,KAAKP,QAAUO,KAAKR,OAAOU,WAAW,MAG3BhB,EAKRc,KAAKd,MAJJW,UAAUC,aAAaC,aAAa,CAAEb,MAAO,SAAUiB,MAAK,SAAUC,GAClElB,EAAMmB,UAAYD,EAClBlB,EAAMoB,YAQtBC,aAAc,WACVP,KAAKd,MAAMsB,SAIfC,aAAc,WACV,OAAOT,KAAKd,OAIhBwB,OAAQ,WACJ,OAAOV,KAAKR,OAAOU,WAAW,QA/D3B,I,kBCAFS,EAAW,CACpBC,EAAE,CAACC,KAAM,UACTC,EAAE,CAACD,KAAM,SACTE,EAAE,CAACF,KAAM,aACTG,EAAE,CAACH,KAAM,WACTI,EAAE,CAACJ,KAAM,aACTK,EAAE,CAACL,KAAM,SACTM,EAAE,CAACN,KAAM,SACTO,EAAE,CAACP,KAAM,oBACTQ,EAAE,CAACR,KAAM,UACTS,EAAE,CAACT,KAAM,QACTU,GAAG,CAACV,KAAM,eACVW,GAAG,CAACX,KAAM,cACVY,GAAG,CAACZ,KAAM,aACVa,GAAG,CAACb,KAAM,SACVc,GAAG,CAACd,KAAM,YACVe,GAAG,CAACf,KAAM,UACVgB,GAAG,CAAChB,KAAM,UACViB,GAAG,CAACjB,KAAM,UACVkB,GAAG,CAAClB,KAAM,WACVmB,GAAG,CAACnB,KAAM,aACVoB,GAAG,CAACpB,KAAM,UACVqB,GAAG,CAACrB,KAAM,gBACVsB,GAAG,CAACtB,KAAM,OACVuB,GAAG,CAACvB,KAAM,UACVwB,GAAG,CAACxB,KAAM,eACVyB,GAAG,CAACzB,KAAM,eACV0B,GAAG,CAAC1B,KAAM,OACV2B,GAAG,CAAC3B,KAAM,SACV4B,GAAG,CAAC5B,KAAM,aACV6B,GAAG,CAAC7B,KAAM,WACV8B,GAAG,CAAC9B,KAAM,kBACV+B,GAAG,CAAC/B,KAAM,WACVgC,GAAG,CAAChC,KAAM,cACViC,GAAG,CAACjC,KAAM,eACVkC,GAAG,CAAClC,KAAM,cACVmC,GAAG,CAACnC,KAAM,QACVoC,GAAG,CAACpC,KAAM,YACVqC,GAAG,CAACrC,KAAM,WACVsC,GAAG,CAACtC,KAAM,UACVuC,GAAG,CAACvC,KAAM,WACVwC,GAAG,CAACxC,KAAM,SACVyC,GAAG,CAACzC,KAAM,UACV0C,GAAG,CAAC1C,KAAM,WACV2C,GAAG,CAAC3C,KAAM,mBACV4C,GAAG,CAAC5C,KAAM,cACV6C,GAAG,CAAC7C,KAAM,SACV8C,GAAG,CAAC9C,KAAM,kBACV+C,GAAG,CAAC/C,KAAM,UACVgD,GAAG,CAAChD,KAAM,aACViD,GAAG,CAACjD,KAAM,WAIDkD,EAAW,SAACC,EAAOC,EAASC,EAAQC,EAAWC,EAAUC,EAAWC,GAC7E,IAAI,IAAIC,EAAI,EAAGA,GAAKP,EAAMQ,OAAQD,IAC9B,GAAGP,EAAMO,IAAMN,EAAQM,IAAML,EAAOK,GAAGJ,EAAW,CAE9C,IAAMM,EAAIT,EAAMO,GAAG,GACbG,EAAIV,EAAMO,GAAG,GACb5F,EAAQqF,EAAMO,GAAG,GACjB3F,EAASoF,EAAMO,GAAG,GAClBI,EAAOV,EAAQM,GAGrBD,EAAIM,YAAc,QAClBN,EAAIO,UAAY,GAChBP,EAAIQ,UAAY,QAChBR,EAAIS,KAAO,aAGXT,EAAIU,YACJV,EAAIW,SAAStE,EAASgE,GAAT,KAAwB,MAAOO,KAAKC,MAAgB,IAAVjB,EAAOK,IAAQ,IAAKE,EAAEL,EAAUM,EAAEL,EAAU,IACnGC,EAAIc,KAAKX,EAAEL,EAAUM,EAAEL,EAAW1F,EAAMyF,EAAS,EAAGxF,EAAOyF,EAAU,KACrEC,EAAIe,WAOHC,EAAS,SAACtB,EAAOC,EAASC,EAAQC,GAE3C,IADA,IAAIoB,EAAQ,GACJhB,EAAI,EAAGA,GAAKP,EAAMQ,OAAQD,IAC9B,GAAGP,EAAMO,IAAMN,EAAQM,IAAML,EAAOK,GAAGJ,EAAU,CAC7C,IAAMQ,EAAOV,EAAQM,GACrBgB,EAAMC,KAAK7E,EAASgE,GAAT,MAGnB,OAAOY,GCjFPE,EAAKC,EAAQ,KAgHjB,SAASC,EAAOC,GAEd9G,QAAQC,IAAI,gBAAgB6G,EAAMC,KAFd,MAKQC,IAAMC,SAAS,IALvB,mBAKbC,EALa,KAKLC,EALK,KAwKpB,OACE,oCACE,4BAAQ7G,GAAG,SAAS8G,UAAU,gBAAgBC,QAzGlD,SAA8BC,GAE5B,IAAIC,EAAkBT,EAAMC,IAG5B/G,QAAQC,IAAI,iCAAiCsH,EAAgBC,QAG7D,IAAIC,EAAUd,EAAGe,SAyDjBD,EAAQE,QArDW,sjGAqDY,CAC7BC,QAAQ,WAENH,EAAQI,MAAM,UAAU,CAACN,GAAiBC,OAAO,QAAS,CACxDI,QAAS,SAASE,GAChBL,EAAQM,OAAO,CACbH,QAAS,SAASG,GAEhB/H,QAAQC,IAAIwH,EAAQO,cAAcD,IAGlCZ,EAAUM,EAAQO,cAAcD,WAM1CE,MAAO,SAASC,GAEdlI,QAAQC,IAAI,UAAUiI,GAGtBf,EAAU,OAKM,GAAjBD,EAAOxB,QACRyB,EAAU,gEAYV,UAGA,yBAAKgB,MAAO,CAACrI,OAAQ,MACrB,uBAAGsH,UAAU,OAAOgB,OAAO,SAASC,KAtK3B,CACX,6DAA8D,8CAC9D,wBAAyB,kEACzB,sBAAuB,iFACvB,2BAA4B,qEAC5B,uBAAwB,yEACxB,mDAAoD,wFACpD,mCAAoC,qEACpC,8BAA+B,+DAC/B,iCAAkC,kEAClC,+BAAgC,kEAChC,+BAAgC,sEAChC,8BAA+B,8DAC/B,sBAAuB,uDACvB,oCAAqC,oEACrC,2BAA4B,2DAC5B,oBAAqB,0EACrB,uBAAwB,8EACxB,aAAc,gCACd,sBAAuB,6DACvB,sBAAuB,qEACvB,sBAAuB,qFACvB,qCAAsC,8EACtC,oBAAqB,8CACrB,yBAA0B,oDAC1B,+BAAgC,uDAChC,YAAa,6CACb,kBAAmB,gDACnB,eAAgB,0DAChB,iBAAkB,8CAClB,aAAc,sEACd,qBAAsB,2DACtB,2BAA4B,2FAC5B,+BAAgC,0DAChC,oBAAqB,6DACrB,4BAA6B,iDAC7B,kBAAmB,yCACnB,gBAAiB,8CACjB,0BAA2B,qDAC3B,0BAA2B,sEAC3B,4BAA6B,0EAC7B,2BAA4B,iGAC5B,cAAe,kDACf,+BAAgC,mEAChC,4BAA6B,8DAC7B,2BAA4B,6DAC5B,4BAA6B,8EAC7B,kBAAmB,gEACnB,kCAAmC,wFACnC,qBAAsB,uEACtB,yBAA0B,kEAoHyBnB,IAAWA,GAC3DJ,EAAMwB,WACP,oCACE,yBAAKlB,UAAU,YACf,uBAAGA,UAAU,QAAb,+BAGkB,OAAnBN,EAAMyB,UAAqB,uBAAGnB,UAAU,QAAb,kCAC5B,yBAAKe,MAAO,CAACrI,OAAQ,OAMZ0I,MAtSf,WAEI,IAAI3I,EACAC,EAHM,EAM4BkH,IAAMC,SAAS,IAN3C,mBAMHwB,EANG,KAMUC,EANV,OAOoB1B,IAAMC,UAAS,GAPnC,mBAOH0B,EAPG,KAOMC,EAPN,OAQwC5B,IAAMC,SAAS,WARvD,mBAQH4B,EARG,KAQgBC,EARhB,iDA2BZ,gCAAAC,EAAA,6DAEEH,GAAW,GAGXhJ,EAAO6B,eAGHuH,EAAQ,IAAIC,uBARlB,SASQD,EAAME,eAAeC,mFAT7B,cAUQC,EAAQlJ,SAASiB,eAAe,SAVxC,SAWuB6H,EAAMK,aAAaD,GAX1C,OAWQE,EAXR,OAcEtJ,QAAQC,IAAIqJ,GAGZrE,EAASqE,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAI,IAAMzJ,EAAMC,EAAQF,EAAOgC,UAGrE8G,EAAelC,EAAO8C,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAI,MAGvDV,GAAW,GAGXE,EAAqBtC,EAAO8C,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAI,KAAM5D,OAAS,EAAI,MAAO,MA1BzF,6CA3BY,sBAWVsB,IAAMuC,WAAU,WAEXrJ,SAASiB,eAAe,QAAQqI,aAAe,KAEhD3J,EAAQK,SAASiB,eAAe,QAAQqI,YAAY,GACpD1J,EAAU,IAAID,EAAO,IACrBD,EAAOgB,YAAYf,EAAMC,KAGzBD,EAAQ,IACRC,EAAS,IACTF,EAAOgB,YAAYf,EAAOC,MAE3B,IAiCL,IAII2J,EAJEC,EAAWC,wBAAc,CAAC9B,MAAO,uBASrC4B,EAFCvJ,SAASiB,eAAe,QAAQqI,aAAe,IAErCtJ,SAASiB,eAAe,QAAQqI,YAAY,GAG5C,IAWb,IAAII,EAAS,CACXC,UAAU,GAAD,OAJXH,EAAsB,IAAID,EAAU,IAAI,GAAiB,IAI9C,OASX,OACE,yBAAKnJ,GAAG,MAAM8G,UAAU,WACtB,wBAAIA,UAAU,iBAAd,iBACA,4BAAQe,MAAOyB,EAAOxC,UAAU,gBAAgBC,QA7FxC,4CA6FR,UAGA,kBAACR,EAAD,CAAQE,IAAK0B,EAAaH,UAAWK,EAASJ,SAAUM,MClH9DiB,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF9J,SAASiB,eAAe,W","file":"static/js/main.7d066789.chunk.js","sourcesContent":["/**\r\n * Our group found this camera function on a StackOverflow reply by user Dalibor.\r\n * We modified it to fit our needs.\r\n * Adapted from: Dalibor--Reply to \"How can I take a picture in React web application (not native)\"\r\n * URL: https://stackoverflow.com/questions/58806971/how-can-i-take-a-picture-in-react-web-application-not-native\r\n * Retrieved: 5/11/2021\r\n */\r\n\r\n// sets up webcam video feed and contains functions for video feed\r\nconst camera = function () {\r\n    let width = 0;\r\n    let height = 0;\r\n    \r\n    const createObjects = function () {\r\n    \r\n        console.log(document.getElementsByTagName('body'))\r\n        const video = document.createElement('video');\r\n        video.id = 'video';\r\n        video.width = width;\r\n        video.height = height;\r\n        video.autoplay = true;\r\n        document.body.appendChild(video);\r\n    \r\n        const canvas = document.createElement('canvas');\r\n        canvas.id = 'canvas';\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        document.body.appendChild(canvas);\r\n\r\n        \r\n    }\r\n    \r\n    \r\n    return {\r\n        video: null,\r\n        context: null,\r\n        canvas: null,\r\n    \r\n        startCamera: function (w = 680, h = 480) {\r\n            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n                width = w;\r\n                height = h;\r\n    \r\n                createObjects();\r\n    \r\n                this.video = document.getElementById('video');\r\n                this.canvas = document.getElementById('canvas');\r\n                this.context = this.canvas.getContext('2d');\r\n    \r\n    \r\n                (function (video) {\r\n                    navigator.mediaDevices.getUserMedia({ video: 'true' }).then(function (stream) {\r\n                        video.srcObject = stream;\r\n                        video.play();\r\n                    });\r\n                })(this.video)\r\n    \r\n            }\r\n        },\r\n    \r\n        // pauses video feed\r\n        takeSnapshot: function () {\r\n            this.video.pause();\r\n        },\r\n\r\n        // gets video feed height\r\n        videoElement: function() {\r\n            return this.video;\r\n        },\r\n\r\n        // get canvas context\r\n        getCtx: function(){\r\n            return this.canvas.getContext('2d');\r\n        }\r\n    \r\n    }\r\n    }();\r\n    \r\n    // export camera\r\n    export default camera;","/**\r\n * Our group used Nicholas Renotte's drawRect function from a YouTube video of his.\r\n * We modified the function and added our own code for our specific use case.\r\n * Adapted from: Nicholas Renotte--\"Building a Real Time Sign Language Detection App with React.JS and Tensorflow.JS | Deep Learning\"\r\n * URL: https://youtu.be/ZTSRZt04JkY?t=2335\r\n * Retrieved: 5/8/2021\r\n */\r\n\r\n// labelMap of ingredients\r\nexport const labelMap = {\r\n    0:{name: 'almond'},\r\n    1:{name: 'apple'},\r\n    2:{name: 'asparagus'},\r\n    3:{name: 'avocado'},\r\n    4:{name: 'baby_corn'},\r\n    5:{name: 'bacon'},\r\n    6:{name: 'bagel'},\r\n    7:{name: 'balsamic_vinegar'},\r\n    8:{name: 'banana'},\r\n    9:{name: 'bean'},\r\n    10:{name: 'bell_pepper'},\r\n    11:{name: 'blackberry'},\r\n    12:{name: 'blueberry'},\r\n    13:{name: 'bread'},\r\n    14:{name: 'brocolli'},\r\n    15:{name: 'butter'},\r\n    16:{name: 'carrot'},\r\n    17:{name: 'cheese'},\r\n    18:{name: 'chicken'},\r\n    19:{name: 'chocolate'},\r\n    20:{name: 'cookie'},\r\n    21:{name: 'cream_cheese'},\r\n    22:{name: 'egg'},\r\n    23:{name: 'garlic'},\r\n    24:{name: 'green_beans'},\r\n    25:{name: 'ground beef'},\r\n    26:{name: 'ham'},\r\n    27:{name: 'honey'},\r\n    28:{name: 'ice_cream'},\r\n    29:{name: 'ketchup'},\r\n    30:{name: 'lasagna_noodle'},\r\n    31:{name: 'lettuce'},\r\n    32:{name: 'lunch_meat'},\r\n    33:{name: 'marshmallow'},\r\n    34:{name: 'mayonnaise'},\r\n    35:{name: 'milk'},\r\n    36:{name: 'mushroom'},\r\n    37:{name: 'mustard'},\r\n    38:{name: 'noodle'},\r\n    39:{name: 'oatmeal'},\r\n    40:{name: 'onion'},\r\n    41:{name: 'potato'},\r\n    42:{name: 'sausage'},\r\n    43:{name: 'shredded_cheese'},\r\n    44:{name: 'strawberry'},\r\n    45:{name: 'sugar'},\r\n    46:{name: 'sweet_potatoes'},\r\n    47:{name: 'tomato'},\r\n    48:{name: 'tortillas'},\r\n    49:{name: 'yogurt'}\r\n}\r\n\r\n// Define a drawing function\r\nexport const drawRect = (boxes, classes, scores, threshold, imgWidth, imgHeight, ctx) => {\r\n    for(let i = 0; i <= boxes.length; i++) {\r\n        if(boxes[i] && classes[i] && scores[i]>threshold) {\r\n            // Extract variables\r\n            const x = boxes[i][0];\r\n            const y = boxes[i][1];\r\n            const width = boxes[i][2];\r\n            const height = boxes[i][3];\r\n            const text = classes[i];\r\n\r\n            // Set styling\r\n            ctx.strokeStyle = 'green';\r\n            ctx.lineWidth = 10;\r\n            ctx.fillStyle = 'white';\r\n            ctx.font = '30px Arial';\r\n\r\n            // DRAW!!\r\n            ctx.beginPath();\r\n            ctx.fillText(labelMap[text]['name']+ ' - ' +Math.round(scores[i]*100)/100, x*imgWidth, y*imgHeight-10);\r\n            ctx.rect(x*imgWidth, y*imgHeight, width*imgWidth/2, height*imgHeight/1.5);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n// return an array of detected ingredients\r\nexport const output = (boxes, classes, scores, threshold) => {\r\n    let signs = []\r\n    for(let i = 0; i <= boxes.length; i++){\r\n        if(boxes[i] && classes[i] && scores[i]>threshold){\r\n            const text = classes[i];\r\n            signs.push(labelMap[text]['name']);\r\n        }\r\n    }\r\n    return signs;\r\n}","/**\r\n * Our group used Nicholas Renotte's React Computer Vision Template from GitHub for this project.\r\n * We modified the template and added our own code for our specific use case.\r\n * Adapted from: Nicholas Renotte--ReactComputerVisionTemplate\r\n * URL: https://github.com/nicknochnack/ReactComputerVisionTemplate\r\n * Retrieved: 5/8/2021\r\n */ \r\n\r\n// Import dependencies\r\nimport React, { useRef, useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport camera from \"./camera.js\";\r\nimport * as cvstfjs from '@microsoft/customvision-tfjs';\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport {output, drawRect} from \"./utilities\";\r\n\r\n// initialize tau-prolog object\r\nvar pl = require(\"tau-prolog\");\r\n\r\n/** \r\n * React functional component App\r\n * where the ingredient object detection takes place\r\n */\r\nfunction App(){\r\n    // naming variables width and height to be used in the scope of the function\r\n    let width;\r\n    let height;\r\n\r\n    // initialize states for ingredients, loading, and detectedSomething\r\n    const [ingredients, setIngredients] = React.useState([]);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [detectedSomething, setdetectedSomething] = React.useState(\"not yet\");\r\n\r\n    // code within this block runs when the component has be renders to the DOM\r\n    React.useEffect(() => {\r\n      // set video and canvas size depending on window size\r\n      if(document.getElementById('root').clientWidth <= 595) {\r\n        // making the video and canvas dimensions smaller because the window is not wide\r\n        width = document.getElementById('root').clientWidth-50;\r\n        height = (480*width)/640;\r\n        camera.startCamera(width,height);\r\n      } else {\r\n        // making the video and canvas dimensions 640x480 when the window is wide enough\r\n        width = 640;\r\n        height = 480;\r\n        camera.startCamera(width, height);\r\n      }\r\n    }, [])\r\n\r\n  // asynchronous callback function for when the user clicks the detect button \r\n  async function detectIngredients(){\r\n    // set loading state to true\r\n    setLoading(true);\r\n\r\n    // pause the video feed\r\n    camera.takeSnapshot();\r\n\r\n    // detect objects using the customvision dependency\r\n    let model = new cvstfjs.ObjectDetectionModel();\r\n    await model.loadModelAsync(process.env.REACT_APP_MODEL_URL);\r\n    const image = document.getElementById('video');\r\n    const result = await model.executeAsync(image);\r\n\r\n    // output classes, scores, and bounding boxes from the object detection\r\n    console.log(result);\r\n    \r\n    // draw the bounding boxes\r\n    drawRect(result[0], result[2], result[1], 0.25, width,height, camera.getCtx());\r\n      \r\n    // set the ingredient state to the array of ingredients detected\r\n    setIngredients(output(result[0], result[2], result[1], 0.25));\r\n\r\n    // set loading state to false\r\n    setLoading(false);\r\n\r\n    // set detected something to \"yes\" if something was detected, otherwise set it to \"no\"\r\n    setdetectedSomething(output(result[0], result[2], result[1], 0.25).length > 0 ? \"yes\": \"no\");\r\n  }\r\n   \r\n  // intialize media query object for smaller screens\r\n  const isMobile = useMediaQuery({query: '(max-width: 578px)'});\r\n\r\n  // variables theHeight and theWidth to be used in the scope of the App component\r\n  let theHeight;\r\n  let theWidth;\r\n\r\n  // set theWidth depending on window size\r\n  if(document.getElementById('root').clientWidth <= 595) {\r\n    // set theWidth to root element client width minus 50\r\n    theWidth = document.getElementById('root').clientWidth-50;\r\n  } else {\r\n    // set theWidth to 640\r\n    theWidth = 640;\r\n  }\r\n\r\n  /**\r\n   * if the window width is small, \r\n   * the height is modified according to a 640x480 ratio, \r\n   * otherwise the height is 535\r\n   */\r\n  isMobile? theHeight =(480*theWidth)/640+70 : theHeight = 535;\r\n\r\n  // marginTop for the button is set to theHeight\r\n  let mobile = {\r\n    marginTop: `${theHeight}px`\r\n  }\r\n\r\n  /**\r\n   * Render the JSX to the DOM\r\n   * Displays title of the app\r\n   * Displays detect button that can trigger object detection\r\n   * Renders recipe component with the App states passed down as props\r\n   */\r\n  return(\r\n    <div id=\"div\" className=\"app-div\">\r\n      <h1 className=\"project-title\">The Lazy Chef</h1>\r\n      <button style={mobile}className=\"search-button\" onClick={detectIngredients}>\r\n        Detect\r\n      </button>\r\n      <Recipe ing={ingredients} detecting={loading} detected={detectedSomething}/>\r\n  </div>\r\n  );\r\n\r\n}\r\n\r\n/** \r\n * React functional Recipe component\r\n * Performs search for recipe using tau-prolog\r\n*/\r\nfunction Recipe(props){\r\n  // output ingredients detected\r\n  console.log(\"ingredients: \"+props.ing);\r\n\r\n  // intialize recipe state\r\n  const [recipe, setRecipe] = React.useState(\"\");\r\n\r\n  // object containing recipe links corresponding to successful prolog unification results\r\n  let lookup = {\r\n    \"sorry, we didn't find any recipes for those ingredients :(\": \"https://www.youtube.com/watch?v=oHg5SJYRHA0\",\r\n    \"X = sausage_omelette.\": \"https://www.emerils.com/123033/pork-sausage-and-cheese-omelette\",\r\n    \"X = bacon_omelette.\": \"https://www.recipetips.com/recipe-cards/t--37341/bacon-and-cheese-omelette.asp\",\r\n    \"X = lumberjack_omelette.\": \"https://www.keyingredient.com/recipes/852875039/lumberjack-omelet/\",\r\n    \"X = cheese_omelette.\": \"https://www.epicurious.com/recipes/food/views/cheese-omelette-51262180\",\r\n    \"X = cheesy_bacon-sausage-egg-hash_brown_skillet.\": \"https://www.allrecipes.com/recipe/261541/cheesy-bacon-sausage-egg-hash-brown-skillet/\",\r\n    \"X = sausage_breakfast_cassarole.\": \"https://www.simplyrecipes.com/recipes/sausage_breakfast_casserole/\",\r\n    \"X = sheepherders_breakfast.\": \"https://www.tasteofhome.com/recipes/sheepherder-s-breakfast/\",\r\n    \"X = sausage_breakfast_burrito.\": \"https://www.tasteofhome.com/recipes/sausage-breakfast-burritos/\",\r\n    \"X = bacon_breakfast_burrito.\": \"https://peasandcrayons.com/2019/03/bacon-breakfast-burrito.html\",\r\n    \"X = combo_breakfast_burrito.\": \"https://tasty.co/recipe/bacon-sausage-egg-wrapped-breakfast-burrito\",\r\n    \"X = cheesy_hash_brown_bake.\": \"https://www.tasteofhome.com/recipes/cheesy-hash-brown-bake/\",\r\n    \"X = berry_smoothie.\": \"https://www.dinneratthezoo.com/mixed-berry-smoothie/\",\r\n    \"X = sweet_potato_and_egg_skillet.\": \"https://www.tasteofhome.com/recipes/sweet-potato-and-egg-skillet/\",\r\n    \"X = hash_brown_egg_bake.\": \"https://www.tasteofhome.com/recipes/hash-brown-egg-bake/\",\r\n    \"X = egg_sandwich.\": \"https://recipes.timesofindia.com/us/recipes/egg-sandwich/rs60018142.cms\",\r\n    \"X = hard_boiled_egg.\": \"https://www.simplyrecipes.com/recipes/how_to_make_perfect_hard_boiled_eggs/\",\r\n    \"X = toast.\": \"https://spicedblog.com/toast/\",  \r\n    \"X = buttered_toast.\": \"https://jerryjamesstone.com/recipe/best-toast-with-butter/\",\r\n    \"X = grilled_cheese.\": \"https://www.spendwithpennies.com/the-best-grilled-cheese-sandwich/\",\r\n    \"X = fancy_sandwich.\": \"https://californiaavocado.com/recipe/fresh-california-avocado-and-turkey-sandwich/\",\r\n    \"X = summer_blueberry_almond_salad.\": \"https://www.food.com/recipe/greens-with-blueberries-feta-and-almonds-301425\",\r\n    \"X = baked_potato.\": \"https://www.gimmesomeoven.com/baked-potato/\",\r\n    \"X = cheese_quesadilla.\": \"https://www.simplyrecipes.com/recipes/quesadilla/\",\r\n    \"X = bean_and_cheese_burrito.\": \"https://www.isabeleats.com/bean-and-cheese-burritos/\",\r\n    \"X = wrap.\": \"https://lmld.org/turkey-bacon-ranch-wraps/\",\r\n    \"X = chef_salad.\": \"https://www.spendwithpennies.com/chefs-salad/\",\r\n    \"X = lasagna.\": \"https://www.spendwithpennies.com/easy-homemade-lasagna/\",\r\n    \"X = spaghetti.\": \"https://www.thewholesomedish.com/spaghetti/\",\r\n    \"X = pizza.\": \"https://www.abeautifulplate.com/the-best-homemade-margherita-pizza/\",\r\n    \"X = chicken_tacos.\": \"https://damndelicious.net/2019/08/06/easy-chicken-tacos/\",\r\n    \"X = bacon_and_egg_pasta.\": \"https://www.foodnetwork.com/recipes/food-network-kitchen/bacon-and-egg-spaghetti-7232463\",\r\n    \"X = brocolli_mac_and_cheese.\": \"https://www.dinneratthezoo.com/broccoli-mac-and-cheese/\",\r\n    \"X = chicken_bake.\": \"https://easyfamilyrecipes.com/million-dollar-chicken-bake/\",\r\n    \"X = lemon_garlic_chicken.\": \"https://rasamalaysia.com/lemon-garlic-chicken/\",\r\n    \"X = hefty_wrap.\": \"https://www.withablast.net/deli-wraps/\",\r\n    \"X = meatloaf.\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\r\n    \"X = vegetable_stir_fry.\": \"https://www.dinneratthezoo.com/vegetable-stir-fry/\",\r\n    \"X = ice_cream_sandwich.\": \"https://www.ifyougiveablondeakitchen.com/cookie-ice-cream-sandwich/\",\r\n    \"X = strawberry_milkshake.\": \"https://www.foodnetwork.com/recipes/fresh-strawberry-milkshakes-3644067\",\r\n    \"X = chocolate_milkshake.\": \"https://www.bettycrocker.com/recipes/chocolate-milkshakes/7b7f7d41-4e3f-4bfa-b148-f29cc2a6b135\",\r\n    \"X = smores.\": \"https://www.allrecipes.com/recipe/22146/smores/\",\r\n    \"X = chocolate_covered_apple.\": \"https://www.allrecipes.com/recipe/63150/chocolate-dipped-apples/\",\r\n    \"X = baked_egg_in_avocado.\": \"https://damndelicious.net/2016/10/05/baked-eggs-in-avocado/\",\r\n    \"X = apple_avocado_salad.\": \"https://www.food.com/recipe/avocado-and-apple-salad-367163\",\r\n    \"X = bell_pepper_omelette.\": \"https://www.thespruceeats.com/vegetarian-omelette-with-bell-peppers-3376569\",\r\n    \"X = egg_butter.\": \"https://www.food.com/recipe/munavoi-finnish-egg-butter-180624\",\r\n    \"X = scrambled_egg_with_sausage.\": \"https://sevensons.net/recipes/quick-and-simple-scrambled-eggs-with-sausage-and-cheese\",\r\n    \"X = egg_and_onion.\": \"https://mondaymorningcookingclub.com.au/recipe/egg-and-onion-or-e-o/\",\r\n    \"X = garlic_fried_eggs.\": \"https://www.thespruceeats.com/garlic-fried-eggs-recipe-2355700\"\r\n  };\r\n\r\n  /**\r\n   * call back function for when user clicks \"Search\"\r\n   * finds recipe using prolog\r\n   */\r\n  function consultKnowledgeBase(e){\r\n    // initialize ingredientArray to the array of detected ingredients\r\n    let ingredientArray = props.ing;\r\n\r\n    // output what ingredientArray is\r\n    console.log(\"consultKnowledgeBase(sorted): \"+ingredientArray.sort());\r\n    \r\n    // start tau prolog sesson\r\n    var session = pl.create();\r\n\r\n    \r\n    // the prolog knowldege base with headless horn clauses that signify the relation between ingredients and recipe \r\n    const knowledgeBase = `\r\n      recipe(bread, butter, buttered_toast).\r\n      recipe(avocado, bread, cheese, lunch_meat, tomato, fancy_sandwich).\r\n      recipe(almonds, balsamic_vinegar, blueberry, cheese, lettuce, mustard, summer_blueberry_almond_salad).     \r\n      recipe(milk, potato, shredded_cheese, baked_potato).\r\n      recipe(shredded_cheese, tortilla, cheese_quesadilla).\r\n      recipe(bean, tortilla, bean_and_cheese_burrito).\r\n      recipe(avocado, lunch_meat, tomato, tortilla, wrap).\r\n      recipe(lettuce, lunch_meat, shredded_cheese, chef_salad).\r\n      recipe(ground_beef, lasagna_noodle, shredded_cheese, tomato, lasagna).\r\n      recipe(noodle, tomatoes, spaghetti).\r\n      recipe(bread, shredded_cheese, tomatoes, pizza).\r\n      recipe(chicken, tomato, tortilla, onion, chicken_tacos).\r\n      recipe(bacon, egg, noodle, bacon_and_egg_pasta).\r\n      recipe(brocolli, milk, noodle, shredded_cheese, brocolli_mac_and_cheese).\r\n      recipe(chicken, shredded_cheese, tomato, chicken_bake).\r\n      recipe(asparagus, chicken, garlic, lemon, lemon_garlic_chicken).\r\n      recipe(avocado, carrot, lettuce, lunch_meat, tortilla, hefty_wrap).\r\n      recipe(brocolli, ground_beef, ketchup, onion, sweet_potato, tomato, meatloaf).\r\n      recipe(baby_corn, bell_pepper, brocolli, cucumber, green_bean, mushroom, soy_sauce, vegetable_stir_fry).\r\n      recipe(cookie, ice_cream, ice_cream_sandwich).\r\n      recipe(milk, strawberry, strawberry_milkshake).\r\n      recipe(chocolate, milk, chocolate_milkshake).\r\n      recipe(chocolate, marshmallow, smores).\r\n      recipe(apple, chocolate, chocolate_covered_apple).\r\n      recipe(cheese, egg, sausage, sausage_omelette).\r\n      recipe(bacon, cheese, egg, bacon_omelette).\r\n      recipe(bacon, cheese, egg, sausage, lumberjack_omelette).\r\n      recipe(cheese, egg, cheese_omelette).\r\n      recipe(bacon, bread, butter, cheese, egg, milk, potato, sausage, cheesy_bacon_sausage_egg_hash_brown_skillet).\r\n      recipe(bread, egg, milk, mustard, shredded_cheese, sausage, sausage_breakfast_cassarole).\r\n      recipe(bacon, egg, onion, potato, shredded_cheese, sheepherders_breakfast).\r\n      recipe(egg, potato, sausage, tortilla, sausage_breakfast_burrito).\r\n      recipe(bacon, egg, potato, tortilla, bacon_breakfast_burrito).\r\n      recipe(bacon, egg, sausage, tortilla, potato, combo_breakfast_burrito).\r\n      recipe(milk, potato, shredded_cheese, cheesy_hash_brown_bake).\r\n      recipe(banana, blueberry, strawberry, berry_smoothie).\r\n      recipe(butter, egg, garlic, sweet_potato, sweet_potato_and_egg_skillet).\r\n      recipe(bacon, egg, milk, potato, shredded_cheese, hash_brown_egg_bake).\r\n      recipe(egg, hard_boiled_egg).\r\n      recipe(bread, egg, egg_sandwich).\r\n      recipe(bread, toast).\r\n      recipe(bread, cheese, grilled_cheese).\r\n      recipe(avocado, egg, baked_egg_in_avocado).\r\n      recipe(apple, avocado, apple_avocado_salad).\r\n      recipe(bell_pepper, egg, bell_pepper_omelette).\r\n      recipe(butter, egg, egg_butter).\r\n      recipe(egg, sausage, scrambled_egg_with_sausage).\r\n      recipe(egg, onion, egg_and_onion).\r\n      recipe(egg, garlic, garlic_fried_eggs).\r\n    `\r\n\r\n    // consulting the knowledge base\r\n    session.consult(knowledgeBase, {\r\n      success:function() {\r\n        // query knowledgeBase with the sorted list of detected ingredients\r\n        session.query(\"recipe(\"+[ingredientArray].sort()+\", X).\", {\r\n          success: function(goal) {\r\n            session.answer({\r\n              success: function(answer) {\r\n                // output result of the query\r\n                console.log(session.format_answer(answer));\r\n\r\n                // set recipe state to the result of query\r\n                setRecipe(session.format_answer(answer));\r\n              }\r\n            });\r\n          }\r\n        })\r\n      },\r\n      error: function(err) {\r\n        // throw error message if there is an error\r\n        console.log(\"error: \"+err);\r\n\r\n        // set recipe state to empty string\r\n        setRecipe(\"\");\r\n      }\r\n    });\r\n\r\n    // set recipe state to the sorry message if recipe state is the empty string\r\n    if(recipe.length == 0){\r\n      setRecipe(\"sorry, we didn't find any recipes for those ingredients :(\");\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * Render the JSX elements to  the DOM\r\n   * Queries knowledge base with the detected ingredients to find recipe\r\n   * Conditionally renders loading or unsuccesful event elements\r\n   */\r\n  return(\r\n    <>\r\n      <button id=\"search\" className=\"search-button\" onClick={consultKnowledgeBase}>\r\n        Search\r\n      </button>\r\n      <div style={{height: 30}}></div>\r\n      <a className=\"link\" target=\"_blank\" href={lookup[recipe]} >{recipe}</a>\r\n      {props.detecting &&\r\n      <>\r\n        <div className=\"spinner\"/>\r\n        <p className=\"link\">looking for ingredients...</p>\r\n      </>\r\n      }\r\n      {props.detected === \"no\" && <p className=\"link\">sorry, nothing was detected :(</p>}\r\n      <div style={{height: 30}}></div>\r\n    </>\r\n  )\r\n}\r\n\r\n// export the App component\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}